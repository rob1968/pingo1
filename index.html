<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Welcome to Pi Bingo</title>
	<link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
	<link rel="icon" type="image/x-icon" href="/favicon/favicon.ico"> <!-- Corrected type and href -->
	<link rel="manifest" href="/favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	<link rel="stylesheet" href="build/styles/all.min.css"/>
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
	<!-- Pi SDK -->
	<script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
<div class="vertical-align text-center" id="registerPage">
	<div class="page-content vertical-align-middle">
		<div class="panel">
			<div class="panel-body">
				<div class="brand">
					<img class="brand-img" src="/images/logo.png" alt="Bingo Bigul"/>
					<h2 class="brand-text font-size-18">Bingo Bigul</h2>
				</div>
				<!-- Pi Login Button START -->
				<button class="btn btn-primary btn-block btn-lg margin-top-40" id="piLoginBtn">
					Login with Pi
				</button>
				<!-- Pi Login Button END -->
				<div class="alert alert-danger alert-dismissible" role="alert" id="alertMsg" style="display: none;">
					<button id="btnCloseAlertMsg" type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<span id="messageText">Authentication failed.</span>
				</div>
			</div>
		</div>

	</div>
</div>

<!-- Room Selection and Creation Wrapper -->
<div id="roomSelectionWrapper" style="display: none; padding-top: 20px;">
	<div class="container">
		<div class="row">
			<div class="col-12 text-center">
				<p id="connectionStatusMsg" style="display: none; margin-bottom: 15px; font-weight: bold;"></p>
			</div>
		</div>
		<div class="row">
			<div class="col-md-6">
				<h3>Create a New Bingo Room</h3>
				<form id="createRoomForm">
					<div class="form-group">
						<label for="roomNameInput">Room Name:</label>
						<input type="text" class="form-control" id="roomNameInput" placeholder="My Awesome Bingo Room" required>
					</div>
					<div class="form-group">
						<label for="maxPlayersInput">Max Players:</label>
						<input type="number" class="form-control" id="maxPlayersInput" value="10" min="2" max="50" required>
					</div>
					<div class="form-group">
						<label for="prizeAmountInput">Prize Amount (Pi):</label>
						<input type="number" class="form-control" id="prizeAmountInput" value="10" min="1" step="0.01" required>
					</div>
					<button type="submit" class="btn btn-success" id="createRoomBtn">Create Room</button>
				</form>
			</div>
			<div class="col-md-6">
				<h3>Available Rooms</h3>
				<div id="availableRoomsSection" style="max-height: 300px; overflow-y: auto;">
					<ul id="roomsList" class="list-group">
						<!-- Rooms will be populated here by JavaScript -->
						<li class="list-group-item">No rooms available yet.</li>
					</ul>
				</div>
				<button class="btn btn-info btn-sm" id="refreshRoomsBtn" style="margin-top: 10px;">Refresh List</button>
			</div>
		</div>
	</div>
</div>

<div id="gameWrapper" style="display: none;">
	<section id="header">
		<div class="container-fluid">
			<div class="col col-sm-9">
				<h1>Welcome to Pi Bingo</h1>
				<button class="btn btn-warning btn-sm" id="donatePiBtn" style="margin-top: 5px;">Donate 1 Pi</button>
			</div>
			<div class="col col-sm-3 text-right">
				<section id="userProfile">
					<div class="dropdown">
						<h2 id="userNameDisplay" class="dropdown-toggle" style="cursor: pointer;"></h2>
						<ul class="dropdown-menu" style="display: none; position: absolute; background-color: #f9f9f9; min-width: 120px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); padding: 12px 16px; z-index: 1; list-style: none;">
							<li><a href="/profile.html" style="color: black; text-decoration: none; display: block;">Profile</a></li>
							<!-- Future items like Logout could be added here -->
						</ul>
					</div>
					<h4>balance: <span id="userBalanceDisplay"></span></h4>
				</section>
			</div>
		</div>
	</section>
	<!-- marketPlace will be shown when a player is in a room, before they are ready -->
	<section id="marketPlace" style="display: none;">
		<div id="marketPlaceCards">
			<div class="container-fluid">
				<div class="col-xs-6 col-sm-3 jsMarketCardContainer selected">
					<label for="one">
						<div class="cards">
							1<input type="radio" id="one" name="marketCards" value="1" checked="checked">
							<img src="/images/market/one_card.png" class="img-responsive"/>
							<div class="price">2</div>
						</div>
					</label>
				</div>
				<div class="col-xs-6 col-sm-3 jsMarketCardContainer">
					<label for="two">
						<div class="cards">
							2<input type="radio" id="two" name="marketCards" value="2">
							<img src="/images/market/two_cards.png" class="img-responsive"/>
							<div class="price">4</div>
						</div>
					</label>
				</div>
				<!-- Removed 3-card option -->
				<!-- Removed 4-card option -->
			</div>
			<!-- Removed card options 5 through 8 -->
		</div>
	</section>
	<!-- gameContainer will be shown when a game in the current room is active -->
	<div id="gameContainer" style="display: none;">
		<!-- Winning modal START-->
		<div class="modal">
			<div class="modal-inner">
				<a data-modal-close class='modal-close'>X</a>
				<div class="modal-content"></div>
			</div>
		</div>
		<div id="winningDialogContainer" style="display: none">
			<section id="winningDialog">
				<header></header>
				<div id="content" class="container-fluid">
				</div>
				<footer>
					<button data-modal-close class="modal-close btn btn-lg center-block">OK</button>
				</footer>
			</section>
		</div>
		<!-- Winning modal END-->
		<div id="timerContainer">
			<p class="pulsate inner-shadow"></p>
		</div>
		<section id="rightGameScreen">
			<section id="blower">
				<canvas id="blower-balloon" class="img-responsive"></canvas>
				<div id="tube" class="img-responsive"></div>
			</section>
			<section id="winPatternsAnimModule" style="display: none;">
				<div id="container">
					<div id="horizontal"></div>
					<div id="vertical"></div>
					<div id="diagonal"></div>
					<div id="empty"></div>
				</div>
			</section>
		</section>
		<section id="leftGameScreen" class="container-fluid"></section>
	</div>
	<!-- Footer will be shown when a player is in a room, before they are ready -->
	<section id="footer" style="display: none;">
		<div class="container-fluid text-center">
			<h3 id="currentRoomInfo"></h3> <!-- To display current room name -->
			<button class="btn btn-primary btn-lg main-btn" id="readyUpBtn">SELECT CARDS & READY UP</button>
			<button class="btn btn-danger btn-sm" id="leaveRoomBtn" style="margin-left: 15px;">Leave Room</button>
			<button class="btn btn-primary btn-lg main-btn" id="logoutBtn" style="margin-left: 15px;">LOGOUT</button>
		</div>
	</section>
	<section id="chatWrapper" style="display: none; margin-top: 20px; padding: 10px; border: 1px solid #ccc; background-color: #f9f9f9;">
		<h4>Room Chat</h4>
		<div id="chatMessagesContainer" style="height: 150px; overflow-y: auto; border: 1px solid #eee; padding: 5px; margin-bottom: 10px; background-color: #fff;">
			<ul id="chatMessagesList" style="list-style-type: none; padding: 0;">
				<!-- Messages will appear here -->
			</ul>
		</div>
		<div id="chatInputContainer" style="display: flex;">
			<input type="text" id="chatMessageInput" placeholder="Type your message..." style="flex-grow: 1; margin-right: 5px;" class="form-control">
			<button id="sendChatMessageBtn" class="btn btn-primary btn-sm">Send</button>
		</div>
	</section>
</div>

<!-- Orientation Prompt -->
<div id="orientationPrompt" style="display: none;">
  <div class="orientation-prompt-content">
    <p id="orientationMessage">Please rotate your device to landscape mode for the best experience.</p>
    <!-- Optional: Add an icon here, e.g., <i class="fa fa-mobile-phone fa-3x"></i> -->
  </div>
</div>

<!-- Debug Log Display -->
<div id="debugLog" style="position: fixed; bottom: 0; left: 0; width: 100%; max-height: 200px; overflow-y: scroll; background-color: rgba(0,0,0,0.8); color: limegreen; font-family: monospace; font-size: 10px; padding: 5px; z-index: 9999; display: none;">
  <p style="margin: 0; padding: 0;">--- Debug Log ---</p>
</div>

<script type="text/javascript" src="build/js/app.js"></script>
</body>
</html>
